<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>{{ title }} - tani.cc</title>
        <link rel="icon" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1/icons/mortarboard-fill.svg" sizes="any" type="image/svg+xml">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400..800;1,400..800&family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Zen+Kaku+Gothic+New&family=Zen+Old+Mincho&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="./modern-normalize.css">
        <style>
         body {
             font-family: "EB Garamond", "Zen Old Mincho", Georgia, serif;
             background: #fefbfa;
             color: #353333;
             .container {
                 max-width: 720px;
                 margin: 10px auto;
                 padding: 10px 10px;
             }
             header {
                 display: grid;
                 grid-template-rows: auto auto;
                 grid-template-columns: 1fr auto;
                 h1 {
                     font-family: "Open Sans", "Zen Kaku Gothic New", sans-serif;
                     font-size: 1.3em;
                 }
                 label {
                     font-family: "Open Sans", "Zen Kaku Gothic New", sans-serif;
                     cursor: pointer;
                     text-align: right;
                     font-size: 1.3em;
                     display: flex;
                     align-items: center;
                     x-icon:nth-of-type(1) {
                         display: none;
                     }
                 }
                 ul {
                     display: none;
                 }
                 &:has(input:checked) {
                     label x-icon {
                         &:nth-of-type(1) {
                             display: inline-block;
                         }
                         &:nth-of-type(2) {
                             display: none;
                         }
                     }
                     ul {
                         display: block;
                     }
                 }
             }
             main {
                 article {
                     text-align: justify;
                     h1, h2, h3, h4, h5 {
                         text-align: center;
                         margin-top: 2em;
                     }
                 }
             }
             footer {
                 border-top: 1px #ccc solid;
             }
             x-icon img {
                 width: 1.1em;
                 height: 1.1em;
             }
         }
        </style>
        <script type="importmap">
         {
             "imports": {
                 "mathjax-full/": "https://cdn.jsdelivr.net/npm/mathjax-full@4.0.0-beta.6/",
                 "#default-font/": "https://cdn.jsdelivr.net/npm/mathjax-pagella-font@4.0.0-beta.6/mjs/",
                 "#mhchem/": "https://cdn.jsdelivr.net/npm/mhchemparser@4/esm/",
                 "shiki": "https://cdn.jsdelivr.net/npm/shiki@1/+esm",
                 "mermaid": "https://cdn.jsdelivr.net/npm/mermaid@10/+esm",
                 "bootstrap-icons/": "https://cdn.jsdelivr.net/npm/bootstrap-icons@1/"
             }
         }
        </script>
        <script type="module" src="./elements.js"></script>
    </head>
    <body>
        <header class="container">
            <h1>@tani</h1>
            <label>
                <x-icon name="three-dots-vertical"></x-icon>
                <x-icon name="three-dots"></x-icon>
                <input style="display: none" type="checkbox">
            </label>
            <ul>
                <li>
                    <a href="https://scrapbox.io/tani-note/">
                        <x-icon name="journal"></x-icon> Scrapbox
                    </a>
                </li>
                <li>
                    <a href="https://github.com/tani">
                        <x-icon name="github"></x-icon> GitHub
                    </a>
                </li>
            </ul>
        </header>
        <main class="container">
            <article>
                {{{ article }}}
            </article>
        </main>
        <footer class="container">
            <p>
                &copy; 2024 TANIGUCHI Masaya
            </p>
            <p>
                This website uses 
                <a href="https://www.jsdelivr.com/" target="_blank" rel="noopener">jsDelivr</a>.
                Please refer to our Terms of Use and Privacy Policy for more information.
            </p>
        </footer>
        {{^production}}
        <script>
         const sse = new EventSource("/sse");
         sse.addEventListener('open', () => {
             console.log("SSE connection was opend:", event);
         });
         sse.addEventListener('message', (event)=>{
             console.log("Received SSE event data:", event.data);
             if (event.data === "reload") {
                 location.reload();
             }
         });
         sse.addEventListener('error', (err)=>{
             console.error("SSE connection error:", err);
         });
         window.addEventListener('beforeunload', () => {
             sse.close();
         });
        </script>
        {{/production}}
    </body>
</html>
